@using Entidades
@model List<Alumno>

@{
    ViewBag.Title = "Inicio";
    Layout = "~/Views/Shared/AlumnosLayout.cshtml";
}

<section class="titulo-pagina">
    <div class="row">
        <div class="col-sm-12">
            <blockquote class="blockquote">
                <div class="row">
                    <div class="col-sm-12">
                        <h1>¡Sube tus calificaiones!</h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <footer class="blockquote-footer">Contestando pregunta referedidas a lo visto en clase, suma puntos cruciales, para subir tus calificaiones al final de la cursada</footer>
                    </div>
                </div>

            </blockquote>
        </div>
    </div>
</section>

<div class="row">
    <div class="col-sm-6">
        <section id="tabla-posiciones">
            <div class="row">
                <div class="col-sm-12">
                    <h2>Tabla de posiciones</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <table class="table table-striped table-hover">
                        <thead class="bg-primary">
                            <tr>
                                <th scope="col">Pos</th>
                                <th scope="col">Almunos</th>
                                <th scope="col">Puntos</th>
                                <th scope="col">Repuestas Bien</th>
                                <th scope="col">Mejor Repuesta</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{int i = 1; }

                            @foreach (Alumno al in Model)
                            {
                                if (al.IdAlumno == (int)Session["UsuarioId"])
                                {
                                    <tr class="table-success">
                                        <td>@i</td>
                                        <td>@al.Nombre @al.Apellido</td>
                                        <td>@al.PuntosTotales</td>
                                        <td>@al.CantidadRespuestasCorrectas</td>
                                        <td>@al.CantidadMejorRespuesta</td>
                                    </tr>
                                }
                                else
                                {
                                    if (i % 2 == 1)
                                    {
                                        <tr class="table-secondary">
                                            <td>@i</td>
                                            <td>@al.Nombre @al.Apellido</td>
                                            <td>@al.PuntosTotales</td>
                                            <td>@al.CantidadRespuestasCorrectas</td>
                                            <td>@al.CantidadMejorRespuesta</td>
                                        </tr>
                                    }
                                    else
                                    {
                                        <tr class="table-primary">
                                            <td>@i</td>
                                            <td>@al.Nombre @al.Apellido</td>
                                            <td>@al.PuntosTotales</td>
                                            <td>@al.CantidadRespuestasCorrectas</td>
                                            <td>@al.CantidadMejorRespuesta</td>
                                        </tr>
                                    }
                                }

                                i = i + 1;
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <div class="col-sm-6">
        <section id="puntajes-por-preguntas">
            <div class="row">
                <div class="col-sm-12">
                    <h4>Preguntas última clase(@ViewBag.Preguntas[0].Clase.Nombre)</h4>
                </div>
            </div>
            <div class="row">

                @foreach(Pregunta pr in ViewBag.Preguntas)
                {
                    <div class="col-sm-6">
                        <h5>@pr.Nro. @pr.Pregunta1 </h5>
                        <ol>
                            @foreach (RespuestaAlumno ra in pr.RespuestaAlumno)
                            {
                            <li>
                                @if (ra.Alumno.IdAlumno == (int)Session["UsuarioId"])
                                {
                                    <strong>@ra.Alumno.Nombre @ra.Alumno.Apellido +@ra.Puntos </strong>
                                }
                                else
                                {
                                    <span>@ra.Alumno.Nombre @ra.Alumno.Apellido +@ra.Puntos</span>
                                }

                                @if (ra.MejorRespuesta)
                                {
                                 <i class="fas fa-award text-success ml-1"></i>
                                }
                            </li>
                            }
                        </ol>
                    </div>
                        
                }
                
            </div>
        </section>
    </div>
</div>

<section id="sin-responder">
    <div class="row">
        <div class="col-sm-12">
            <h2>Preguntas sin responder.</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">

            @foreach (Entidades.ModelView.PreguntaRespuestaAlumno p in ViewBag.SinResponder)
            {
                <div class="col-sm-12">
                    <a href="/Alumnos/ResponderPregunta/@p.IdPregunta">@p.Nro. @p.Pregunta</a>
                </div>

            }
        </div>
    </div>
</section>